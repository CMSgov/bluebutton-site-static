import{d as ve,Q as ot,h as N,o as v,r as Ue,k as O,b as e,i as p,m as Ye,aR as rt,K as G,a6 as it,u as ut,Z as Ce,a as x,a1 as Ge,c as E,aS as ct,ab as dt,aT as pt,a2 as Z,aU as vt,n as mt,g as ft,Y as Ie,t as ce,l as Y,z as fe,H as he,aV as ht,J as de,aW as bt,aX as gt,aY as Me,aZ as Ve,a_ as yt,a$ as xt,a5 as Ae,b0 as kt,b1 as wt,b2 as _t,b3 as Ct,b4 as $t,aA as $e,U as ye,I as K,w as _,$ as ie,F as me,x as _e,b5 as be,f as pe,b6 as Te,b7 as Qe,C as B,b8 as We,V as te,b9 as Rt,aQ as qe,aa as Xe,W as ke,a0 as Oe,ba as qt,a9 as Re,bb as xe,D as St,P as we,bc as et,E as De,bd as It,aF as Dt,aJ as Ne,be as He,bf as Be,bg as Mt,s as Et,bh as Ut,a3 as Tt,v as Wt,bi as tt,bj as zt,bk as Lt,aP as ue,bl as At,bm as ze,bn as Ot,aO as Fe,bo as jt,bp as Ke,bq as Pt,br as Vt,aL as Nt}from"./api.astro_astro_type_script_index_0_lang.CNbPyKW1.js";import{d as at}from"./LibraryIcon.vue.zvQbyoa7.js";import{m as lt,c as Ht,o as Bt,C as Ft,$ as Kt,D as Zt,h as Jt}from"./mediaTypes.B-tBADhC.js";import{i as Ze}from"./ScalarAsciiArt.vue.EX9so6ue.js";import{g as Yt,m as Gt}from"./SidebarButton.vue.SPr50Aqr.js";import{a as Qt,w as Le}from"./DeleteSidebarListElement.vue.67KjR9Fr.js";import{N as Xt,C as st}from"./EditSidebarListElement.vue.C74QEdKJ.js";import{$ as ea}from"./IconSelector.vue.DAnUa1d6.js";import{m as ta}from"./Draggable.vue.DbNyVWAi.js";import"./ScalarHotkey.vue.Cwc2H84h.js";import"./ScalarPopover.vue.9gC9V-3Y.js";const Se=i=>i?.["x-internal"]===!0||i?.["x-scalar-ignore"]===!0,aa={key:0},la={key:1},sa={key:2},na={key:3},oa={key:4},ra={key:5},ia={name:"ScalarIconX"},ua=ve({...ia,props:{label:{},weight:{}},setup(i){const t=i,{bind:o,weight:u}=ot(t);return(s,r)=>(v(),N("svg",Ye({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 256 256",fill:"currentColor"},e(o)),[Ue(s.$slots,"default"),e(u)==="bold"?(v(),N("g",aa,r[0]||(r[0]=[p("path",{d:"M208.49,191.51a12,12,0,0,1-17,17L128,145,64.49,208.49a12,12,0,0,1-17-17L111,128,47.51,64.49a12,12,0,0,1,17-17L128,111l63.51-63.52a12,12,0,0,1,17,17L145,128Z"},null,-1)]))):e(u)==="duotone"?(v(),N("g",la,r[1]||(r[1]=[p("path",{d:"M216,56V200a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V56A16,16,0,0,1,56,40H200A16,16,0,0,1,216,56Z",opacity:"0.2"},null,-1),p("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"},null,-1)]))):e(u)==="fill"?(v(),N("g",sa,r[2]||(r[2]=[p("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM181.66,170.34a8,8,0,0,1-11.32,11.32L128,139.31,85.66,181.66a8,8,0,0,1-11.32-11.32L116.69,128,74.34,85.66A8,8,0,0,1,85.66,74.34L128,116.69l42.34-42.35a8,8,0,0,1,11.32,11.32L139.31,128Z"},null,-1)]))):e(u)==="light"?(v(),N("g",na,r[3]||(r[3]=[p("path",{d:"M204.24,195.76a6,6,0,1,1-8.48,8.48L128,136.49,60.24,204.24a6,6,0,0,1-8.48-8.48L119.51,128,51.76,60.24a6,6,0,0,1,8.48-8.48L128,119.51l67.76-67.75a6,6,0,0,1,8.48,8.48L136.49,128Z"},null,-1)]))):e(u)==="regular"?(v(),N("g",oa,r[4]||(r[4]=[p("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"},null,-1)]))):e(u)==="thin"?(v(),N("g",ra,r[5]||(r[5]=[p("path",{d:"M202.83,197.17a4,4,0,0,1-5.66,5.66L128,133.66,58.83,202.83a4,4,0,0,1-5.66-5.66L122.34,128,53.17,58.83a4,4,0,0,1,5.66-5.66L128,122.34l69.17-69.17a4,4,0,1,1,5.66,5.66L133.66,128Z"},null,-1)]))):O("",!0)],16))}}),ca=["aria-label"],da=ve({inheritAttrs:!1,__name:"ScalarSidebarSearchInput",props:rt({autofocus:{type:Boolean},loading:{},label:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const t=G(null),o=it(i,"modelValue");function u(){o.value="",t.value&&t.value.focus()}const{classCx:s,otherAttrs:r}=ut();return Ce(()=>{var y;return i.autofocus&&((y=t.value)==null?void 0:y.focus())}),(y,a)=>(v(),N("label",mt(ft(e(s)("flex items-center rounded border text-base has-[:focus-visible]:bg-b-1 has-[:focus-visible]:outline h-8 gap-1 pl-2 pr-1.5","bg-sidebar-b-search border-sidebar-border-search",o.value?"text-c-1":"text-sidebar-c-search"))),[x(e(ct),{class:"text-sidebar-c-search size-4"}),Ge(p("input",Ye({ref_key:"inputRef",ref:t,"aria-label":y.label??"Enter search query",autocapitalize:"off",autocomplete:"off",autocorrect:"off",class:"flex-1 appearance-none rounded border-none bg-transparent outline-none",placeholder:"Search...",spellcheck:"false",type:"search"},e(r),{"onUpdate:modelValue":a[0]||(a[0]=n=>o.value=n)}),null,16,ca),[[dt,o.value]]),y.loading&&y.loading.isLoading?(v(),E(e(pt),{key:0,class:"mr-3 self-center",loadingState:y.loading,size:"md"},null,8,["loadingState"])):o.value?(v(),E(e(vt),{key:1,class:"p-0.25 size-4",icon:e(ua),weight:"bold",label:"Clear Search",onClick:Z(u,["stop","prevent"])},null,8,["icon"])):O("",!0)],16))}}),pa={parse(i){try{return{error:!1,data:JSON.parse(i)}}catch(t){return{error:!0,message:t.message?String(t.message):"Unknown Error"}}}},va=["aria-pressed"],ma={class:"sr-only"},fa={class:"size-4",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ha={"clip-path":"url(#mask)"},ba=ve({__name:"SidebarToggle",setup(i){const{isSidebarOpen:t,toggleSidebarOpen:o}=Ie();return(u,s)=>(v(),N("button",{"aria-pressed":e(t),class:"scalar-sidebar-toggle text-c-3 hover:bg-b-2 active:text-c-1 rounded-lg p-2",type:"button",onClick:s[0]||(s[0]=(...r)=>e(o)&&e(o)(...r))},[p("span",ma,ce(e(t)?"Hide":"Show")+" sidebar",1),(v(),N("svg",fa,[s[1]||(s[1]=p("defs",null,[p("clipPath",{id:"mask"},[p("path",{"clip-rule":"evenodd",d:"M9 3.2H4c-1.7 0-3 1.3-3 3v11.5c0 1.7 1.3 3 3 3h5V3.2z"})])],-1)),p("g",ha,[p("path",{class:Y(["transition-transform duration-300",e(t)?"translate-x-0":"-translate-x-1/2"]),d:"M1 3.2h8v17.5H1z",fill:"currentColor"},null,2)]),s[2]||(s[2]=p("path",{d:"M20 20.8H4c-1.7 0-3-1.3-3-3V6.2c0-1.7 1.3-3 3-3h16c1.7 0 3 1.3 3 3v11.5c0 1.7-1.3 3-3 3zM9 3.2v17.5",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,-1))]))],8,va))}}),ga=i=>{const t=new Set;return i&&["path","query","headers","cookies"].some(o=>{var u,s;return(s=(u=i.parameters)==null?void 0:u[o])==null?void 0:s.some(r=>{r.required&&r.value===""&&t.add(r.key)})}),t},ya=5*1e3,xa=60*1e3,ka=()=>{const{toast:i}=Ae(),t=fe(),o=he(),{activeCollection:u,activeWorkspace:s}=t,{collectionMutators:r}=o,y=l=>i(`[useOpenApiWatcher] Changes to the ${l} were not applied`,"error"),a=l=>{l.path[0]==="info"||l.path[0]==="security"?kt(l,t,o)||y("collection"):l.path[0]==="components"&&l.path[1]==="securitySchemes"?wt(l,t,o)||y("securitySchemes"):l.path[0]==="servers"?_t(l,t,o)||y("servers"):l.path[0]==="tags"?Ct(l,t,o)||y("tags"):l.path[0]==="paths"&&($t(l,t,o)||y("requests"))},{pause:n,resume:R}=ht(async()=>{var l,L;const A=(l=u.value)==null?void 0:l.documentUrl;if(!A)return;const C=Me[A];try{const k=await bt(A,(L=s.value)==null?void 0:L.proxyUrl,!1),w=gt(k);if(r.edit(u.value.uid,"watchModeStatus","WATCHING"),C!=null&&C.hash)if(C.hash&&C.hash!==w){const{schema:q}=await Ve(k),I=yt(C.schema,q),D=xt(I);try{D.forEach(a),Me[A]={hash:w,schema:q}}catch(g){console.error("[useOpenApiWatcher] Error:",g)}}else console.log("[useOpenApiWatcher] No changes detected yetâ€¦");else{const{schema:q}=await Ve(k);q&&(Me[A]={hash:w,schema:q})}}catch(k){console.error("[useOpenApiWatcher] Error:",k),console.info("[useOpenApiWatcher] Pausing watcher for 60 seconds"),n(),r.edit(u.value.uid,"watchModeStatus","ERROR"),i("[useOpenApiWatcher] Unable to fetch the spec file, paused the watcher for 60 seconds","error"),setTimeout(()=>{console.info("[useOpenApiWatcher] Resuming watcher"),R()},xa)}},ya);de([()=>{var l;return(l=u.value)==null?void 0:l.documentUrl},()=>{var l;return(l=u.value)==null?void 0:l.watchMode}],([l,L])=>{l&&L?(console.info(`[useOpenApiWatcher] Watching ${l} â€¦`),R()):u.value&&(n(),r.edit(u.value.uid,"watchModeStatus","IDLE"))},{immediate:!0})},wa=`         ,\\
         \\\\\\,_
          \\\` ,\\
     __,.-" =__)
   ."        )
,_/   ,    \\/\\_
\\_| )_-\\ \\_-\`
   \`-----\` \`--\``,_a=`         __
        // \\,_
          \\\` ,\\
     __,.-" =__)
   ."        )
,_/   ,    \\/\\ 
\\_| // /  /  /
   /  /    `,Ca={class:"m-0 flex items-center gap-1.5 font-medium whitespace-nowrap"},$a={class:"flex h-4 w-4 items-center justify-center"},Ra=ve({__name:"EnvironmentSelector",setup(i){const{activeCollection:t,activeWorkspace:o,activeEnvironment:u}=fe(),{collectionMutators:s}=he(),{layout:r}=$e(),y=ye(),a=C=>{t.value&&o.value&&(s.edit(t.value.uid,"x-scalar-active-environment",C),o.value.activeEnvironmentId=C)},n=()=>{var C;return y.push({name:"environment.default",params:{[te.Workspace]:(C=o.value)==null?void 0:C.uid}})},R=K(()=>{const{value:C}=u,{value:k}=t;return C?.name||k?.["x-scalar-active-environment"]||"No Environment"}),l=K(()=>{const{value:C}=t,k=C?.["x-scalar-environments"];return k?Object.entries(k).map(([w,q])=>({...q,uid:w,name:w})):[]}),L=()=>{const C=l.value;if(C.length>0){const k=C[C.length-1];k!=null&&k.uid&&a(k.uid)}};de(l,(C,k)=>{C.length>k.length&&L()});const A=C=>{const k=C["x-scalar-active-environment"];k&&t.value&&o.value?(t.value["x-scalar-active-environment"]=k,o.value.activeEnvironmentId=k):o.value&&(o.value.activeEnvironmentId="")};return de(t,C=>C&&A(C)),Ce(()=>{t.value&&A(t.value)}),(C,k)=>(v(),E(e(We),{teleport:""},{items:_(()=>[(v(!0),N(me,null,_e(l.value,w=>(v(),E(e(be),{key:w.uid,class:"group/item flex items-center gap-1.5 overflow-hidden text-ellipsis whitespace-nowrap",onClick:Z(q=>a(w.uid),["stop"])},{default:_(()=>{var q;return[x(e(Te),{selected:((q=e(t))==null?void 0:q["x-scalar-active-environment"])===w.uid},null,8,["selected"]),pe(" "+ce(w.name),1)]}),_:2},1032,["onClick"]))),128)),x(e(be),{class:"group/item flex items-center gap-1.5 overflow-hidden text-ellipsis whitespace-nowrap",onClick:k[0]||(k[0]=Z(w=>a(""),["stop"]))},{default:_(()=>{var w,q,I;return[x(e(Te),{selected:((w=e(u))==null?void 0:w.uid)===""&&((q=e(t))==null?void 0:q["x-scalar-active-environment"])===""||((I=e(u))==null?void 0:I.name)==="No Environment"},null,8,["selected"]),k[1]||(k[1]=pe(" No Environment "))]}),_:1,__:[1]}),x(e(Qe)),e(r)!=="modal"?(v(),E(e(be),{key:0,class:"flex items-center gap-1.5",onClick:n},{default:_(()=>[p("div",$a,[x(e(B),{icon:"Brackets",size:"sm"})]),k[2]||(k[2]=p("span",{class:"leading-none"},"Manage Environments",-1))]),_:1,__:[2]})):O("",!0)]),default:_(()=>[x(e(ie),{class:"text-c-1 hover:bg-b-2 line-clamp-1 h-auto w-fit justify-start px-1.5 py-1.5 font-normal",fullWidth:"",variant:"ghost"},{default:_(()=>[p("h2",Ca,ce(R.value),1)]),_:1})]),_:1}))}});function qa(){const i=ye(),{activeWorkspace:t,activeWorkspaceRequests:o,activeWorkspaceCollections:u}=fe(),{requests:s,tags:r}=he(),y=G([]),a=G([]),n=G(0),R=G(""),l=G(null),L=G([]),A=new Rt(y.value,{keys:["title","description","body"]}),C=()=>{R.value="",n.value=0,a.value=[],l.value instanceof HTMLInputElement&&l.value.blur()},k=m=>{y.value=m.filter(f=>!Se(f)).filter(f=>{var j;const P=(j=u.value)==null?void 0:j.find(W=>W.requests.includes(f.uid));return!(P!=null&&P.tags.map(W=>r[W]).filter(qe).filter(W=>{var $;return($=f.tags)==null?void 0:$.includes(W.name)}).filter(W=>Se(W)).length)}).map(f=>{var j,P;return{id:f.uid,title:f.summary??f.method,description:f.description??"",httpVerb:f.method,path:f.path,link:(P=i?.resolve({name:"request",params:{[te.Request]:f.uid,[te.Workspace]:(j=t.value)==null?void 0:j.uid}}))==null?void 0:P.href}}),A.setCollection(y.value)},w=()=>{n.value=0,a.value=A.search(R.value)};de(R,m=>{m.length?w():a.value=[]});const q=m=>{const f=m==="up"?-1:1,j=c.value.length;n.value=(n.value+f+j)%j,Xe(()=>{const P=L.value[n.value];P instanceof HTMLElement&&P.scrollIntoView({behavior:"smooth",block:"center"})})},I=()=>{if(n.value>=0){const m=c.value[n.value];m&&g(m)}},D=K(()=>o.value.map(m=>s[m]).filter(qe));de(o,()=>{k(D.value)},{immediate:!0});const g=m=>{i.push(m.item.id),C()},c=K(()=>R.value.length===0?y.value.map(m=>({item:m})):a.value);return{searchText:R,searchResultsWithPlaceholderResults:c,selectedSearchResult:n,onSearchResultClick:g,fuseSearch:w,searchInputRef:l,searchResultRefs:L,navigateSearchResults:q,selectSearchResult:I,populateFuseDataArray:k}}function Sa(i,{collections:t,collectionMutators:o,tags:u,tagMutators:s,workspaceMutators:r}){const{layout:y}=$e(),a=(n,R)=>{n.type==="collection"?o.edit(n.uid,"children",R):n.type==="tag"&&s.edit(n.uid,"children",R)};return{handleDragEnd:(n,R)=>{var l,L,A,C;if(!n||!R)return;const{id:k,parentId:w}=n,{id:q,parentId:I,offset:D}=R;if(w?t[w]?o.edit(w,"children",t[w].children.filter(g=>g!==k)):u[w]&&s.edit(w,"children",u[w].children.filter(g=>g!==k)):r.edit((l=i.value)==null?void 0:l.uid,"collections",((L=i.value)==null?void 0:L.collections.filter(g=>g!==k))??[]),D===2){const g=t[q]||u[q];g&&a(g,[...g.children??[],k])}else if(I){const g=t[I]||u[I];if(!g)return;const c=[...g.children??[]],m=c.findIndex(f=>q===f)??0;c.splice(m+D,0,k),a(g,c)}else{const g=[...((A=i.value)==null?void 0:A.collections)??[]],c=g.findIndex(m=>q===m)??0;g.splice(c+D,0,k),r.edit((C=i.value)==null?void 0:C.uid,"collections",g)}},isDroppable:(n,R)=>{var l,L;return!(y==="modal"||!t[n.id]&&R.offset!==2||t[n.id]&&((L=(l=t[R.id])==null?void 0:l.info)==null?void 0:L.title)==="Drafts")}}}const Ia={class:"grid grid-cols-[auto_1fr] gap-2"},Da={class:"flex aspect-square"},Ma=ve({__name:"EditSidebarListCollection",props:{name:{},icon:{}},emits:["close","edit"],setup(i,{emit:t}){const o=i,u=t,s=G(o.name),r=G(o.icon);return(y,a)=>(v(),E(Qt,{onCancel:a[2]||(a[2]=n=>u("close")),onSubmit:a[3]||(a[3]=n=>u("edit",s.value,r.value))},{default:_(()=>[p("div",Ia,[p("div",Da,[x(ea,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=n=>r.value=n),placement:"bottom-start"},{default:_(()=>[x(e(ie),{class:"aspect-square h-auto px-0",variant:"outlined"},{default:_(()=>[x(e(at),{class:"text-c-2 size-4",src:r.value},null,8,["src"])]),_:1})]),_:1},8,["modelValue"])]),x(e(Xt),{modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=n=>s.value=n),autofocus:"",class:"flex-1"},null,8,["modelValue"])])]),_:1}))}}),Ea=ve({__name:"RequestSidebarItemMenu",props:{menuItem:{}},emits:["closeMenu","toggleWatchMode","clearDrafts"],setup(i,{emit:t}){const o=i,u=t,{replace:s}=ye(),{activeRouterParams:r,activeWorkspaceCollections:y,activeWorkspaceRequests:a}=fe(),{events:n,requestMutators:R}=he(),l=ke(),L=ke(),A=ke(),C=()=>{var m;return n.commandPalette.emit({commandName:"Add Example",metaData:{itemUid:(m=o.menuItem.item)==null?void 0:m.entity.uid}})},k=(m,f)=>{var j;(j=o.menuItem.item)==null||j.edit(m,f),l.hide()},w=()=>{var m,f,j;if((m=o.menuItem.item)==null||m.delete(),!a.value.length){const{request:P}=et(),W=y.value.find($=>{var M;return((M=$.info)==null?void 0:M.title)==="Drafts"});W&&(R.add(P,W.uid),s({name:"request",params:{[te.Request]:P.uid}}))}if(r.value[te.Request]===((f=o.menuItem.item)==null?void 0:f.entity.uid)&&s({name:"request",params:{[te.Request]:"default"}}),r.value[te.Examples]===((j=o.menuItem.item)==null?void 0:j.entity.uid)&&s({name:"request",params:{[te.Request]:"default"}}),y.value[0]){const P=y.value[0].requests[0];s({name:"request",params:{[te.Request]:P}})}L.hide()},q=G(null);de([()=>o.menuItem.open,q],async([m])=>{var f,j;m&&(j=(f=q.value)==null?void 0:f.$parent)!=null&&j.$el&&q.value.$parent.$el.focus()});const I=()=>o.menuItem.open&&u("closeMenu");Ce(()=>window.addEventListener("click",I)),Oe(()=>window.removeEventListener("click",I));const D=()=>{u("toggleWatchMode",o.menuItem.item)},g=()=>{u("clearDrafts"),A.hide()},c=K(()=>{var m;return((m=o.menuItem.item)==null?void 0:m.title)==="Drafts"});return(m,f)=>{var j,P;return v(),N(me,null,[m.menuItem.targetRef&&m.menuItem.open?(v(),E(e(St),{key:0,placement:"right-start",target:m.menuItem.targetRef,teleport:""},{floating:_(()=>[x(e(qt),{onKeydown:f[3]||(f[3]=Re(W=>m.$emit("closeMenu"),["escape"]))},{default:_(()=>{var W,$;return[((W=m.menuItem.item)==null?void 0:W.entity.type)==="request"?(v(),E(e(xe),{key:0,class:"flex gap-2",onClick:C},{default:_(()=>[x(e(B),{class:"inline-flex",icon:"Example",size:"md",thickness:"1.5"}),f[8]||(f[8]=p("span",null,"Add Example",-1))]),_:1,__:[8]})):O("",!0),c.value?O("",!0):(v(),E(e(xe),{key:1,ref_key:"menuRef",ref:q,class:"flex gap-2",onClick:f[0]||(f[0]=M=>e(l).show())},{default:_(()=>{var M;return[x(e(B),{class:"inline-flex",icon:"Edit",size:"md",thickness:"1.5"}),p("span",null,[((M=m.menuItem.item)==null?void 0:M.entity.type)==="collection"?(v(),N(me,{key:0},[pe(" Edit ")],64)):(v(),N(me,{key:1},[pe(" Rename ")],64))])]}),_:1},512)),($=m.menuItem.item)!=null&&$.documentUrl?(v(),E(e(xe),{key:2,ref_key:"menuRef",ref:q,class:"flex gap-2",onClick:D},{default:_(()=>{var M,U;return[x(e(B),{class:"inline-flex",icon:(M=m.menuItem.item)!=null&&M.watchMode?"Unwatch":"Watch",size:"md",thickness:"1.5"},null,8,["icon"]),p("span",null,ce((U=m.menuItem.item)!=null&&U.watchMode?"Disable Watch Mode":"Enable Watch Mode"),1)]}),_:1},512)):O("",!0),c.value?O("",!0):(v(),E(e(xe),{key:3,class:"flex gap-2",onClick:f[1]||(f[1]=M=>e(L).show())},{default:_(()=>[x(e(B),{class:"inline-flex",icon:"Delete",size:"md",thickness:"1.5"}),f[9]||(f[9]=p("span",null,"Delete",-1))]),_:1,__:[9]})),c.value?(v(),E(e(xe),{key:4,class:"flex gap-2",onClick:f[2]||(f[2]=M=>e(A).show())},{default:_(()=>[x(e(B),{class:"inline-flex",icon:"Delete",size:"md",thickness:"1.5"}),f[10]||(f[10]=p("span",null,"Clear Drafts",-1))]),_:1,__:[10]})):O("",!0)]}),_:1})]),_:1},8,["target"])):O("",!0),x(e(we),{size:"xxs",state:e(L),title:`Delete ${(j=m.menuItem.item)==null?void 0:j.resourceTitle}`},{default:_(()=>{var W,$;return[x(Le,{variableName:((W=m.menuItem.item)==null?void 0:W.title)??"",warningMessage:($=m.menuItem.item)==null?void 0:$.warning,onClose:f[4]||(f[4]=M=>e(L).hide()),onDelete:w},null,8,["variableName","warningMessage"])]}),_:1},8,["state","title"]),x(e(we),{size:"xxs",state:e(l),title:`Edit ${(P=m.menuItem.item)==null?void 0:P.resourceTitle}`},{default:_(()=>{var W,$,M,U;return[((W=m.menuItem.item)==null?void 0:W.resourceTitle)==="Collection"?(v(),E(Ma,{key:0,icon:(($=m.menuItem.item)==null?void 0:$.icon)||"interface-content-folder",name:(M=m.menuItem.item)==null?void 0:M.title,onClose:f[5]||(f[5]=J=>e(l).hide()),onEdit:k},null,8,["icon","name"])):(v(),E(st,{key:1,name:((U=m.menuItem.item)==null?void 0:U.title)??"",onClose:f[6]||(f[6]=J=>e(l).hide()),onEdit:k},null,8,["name"]))]}),_:1},8,["state","title"]),x(e(we),{size:"xxs",state:e(A),title:"Clear Drafts"},{default:_(()=>[x(Le,{variableName:"All Drafts",warningMessage:"This action will clear all drafts. This cannot be undone.",onClose:f[7]||(f[7]=W=>e(A).hide()),onDelete:g})]),_:1},8,["state"])],64)}}}),Ua=De(Ea,[["__scopeId","data-v-709241c2"]]),Ta=(i,t,o)=>{var u;const s=i.find(n=>{var R;return((R=n.info)==null?void 0:R.title)==="Drafts"}),r=t.length===1;if(!t[0])return!1;const y=s?.requests.includes(t[0]);if(!y)return!1;const a=((u=o[s?.requests[0]??""])==null?void 0:u.summary)!=="My First Request";return r&&y&&!a},Wa={class:"line-clamp-1 w-full pl-2 break-all"},za={class:"flex flex-row items-center gap-1"},La={class:"relative"},Aa={class:"flex items-start"},Oa={class:"flex flex-1 flex-row justify-between font-medium"},ja={class:"line-clamp-1 w-full text-left break-all"},Pa={class:"relative flex h-fit justify-end"},Va={class:"flex items-center justify-center",type:"button"},Na=["aria-expanded"],Ha={class:"flex h-5 max-w-[14px] items-center justify-center"},Ba={class:"flex flex-1 flex-row justify-between"},Fa={class:"line-clamp-1 w-full text-left font-medium break-all"},Ka={class:"relative flex h-fit justify-end"},Za={class:"flex items-center justify-center",type:"button"},Ja={key:3},Ee="hover:bg-sidebar-b-active indent-padding-left",Ya=ve({__name:"RequestSidebarItem",props:{isDraggable:{type:Boolean,default:!1},isDroppable:{type:[Boolean,Function],default:!1},parentUids:{},uid:{},menuItem:{}},emits:["onDragEnd","newTab","openMenu"],setup(i,{emit:t}){It(h=>({eae2c57a:f.value,"7c91ad9b":j.value}));const o=t,{activeCollection:u,activeRequest:s,activeRouterParams:r,activeWorkspace:y}=fe(),{collections:a,tags:n,requests:R,requestExamples:l,collectionMutators:L,tagMutators:A,requestMutators:C,requestExampleMutators:k,events:w}=he(),q=ye(),{collapsedSidebarFolders:I,toggleSidebarFolder:D}=Ie(),{layout:g}=$e(),c=K(()=>{var h,d,F,X,V,H;const z=a[i.uid],le=n[i.uid],se=R[i.uid],S=l[i.uid];return z?{title:((h=z.info)==null?void 0:h.title)||"Untitled Collection",entity:z,resourceTitle:"Collection",children:z.children,icon:z["x-scalar-icon"],documentUrl:z.documentUrl,watchMode:z.watchMode,to:z.uid&&((d=z?.info)==null?void 0:d.title)!=="Drafts"?{name:"collection",params:{[te.Workspace]:(F=y.value)==null?void 0:F.uid,[te.Collection]:z.uid}}:void 0,warning:"This cannot be undone. You're about to delete the collection and all folders and requests inside it.",edit:(b,T)=>{L.edit(z.uid,"info.title",b),T&&L.edit(z.uid,"x-scalar-icon",T)},delete:()=>{y.value&&L.delete(z,y.value)}}:le?{title:le.name,entity:le,resourceTitle:"Tag",children:le.children,warning:"This cannot be undone. You're about to delete the tag and all requests inside it",edit:b=>A.edit(le.uid,"name",b),delete:()=>i.parentUids[0]&&A.delete(le,i.parentUids[0])}:se?{title:se.summary??se.path,to:{name:"request",params:{workspace:(X=y.value)==null?void 0:X.uid,request:se.uid}},method:se.method,entity:se,resourceTitle:"Request",warning:"This cannot be undone. You're about to delete the request.",children:se.examples.slice(1),edit:b=>C.edit(se.uid,"summary",b),delete:()=>i.parentUids[0]&&C.delete(se,i.parentUids[0])}:S!=null&&S.requestUid?{title:S.name,to:{name:"request.examples",params:{workspace:(V=y.value)==null?void 0:V.uid,request:S.requestUid,examples:S.uid}},method:(H=R[S.requestUid])==null?void 0:H.method,entity:S,resourceTitle:"Example",warning:"This cannot be undone. You're about to delete the example from the request.",children:[],edit:b=>k.edit(S.uid,"name",b),delete:()=>k.delete(S)}:{title:"Unknown",entity:{uid:"",type:"unknown"},resourceTitle:"Unknown",children:[],edit:()=>null,delete:()=>null}}),m=K(()=>c.value.entity.type==="collection"&&c.value.title==="Drafts"),f=K(()=>i.parentUids.length?g==="modal"?`${(i.parentUids.length-1)*12}px`:`${i.parentUids.length*12}px`:"12px"),j=K(()=>i.parentUids.length?g==="modal"?`${(i.parentUids.length-1)*12}px`:`${i.parentUids.length*12}px`:"0px"),P=K(()=>{var h;return I[i.uid]||((h=s.value)==null?void 0:h.uid)===i.uid&&c.value.entity.examples.length>1}),W=K(()=>{var h;return typeof q.currentRoute.value.name=="string"&&q.currentRoute.value.name.startsWith("request")&&r.value[te.Request]==="default"&&((h=s.value)==null?void 0:h.uid)===i.uid}),$=G(null),M=K(()=>{let h=.5,d=.5;if(!$.value)return{ceiling:h,floor:d};const{draggingItem:F}=$.value;return!a[F?.id]&&c.value.entity.type==="collection"?(h=1,d=0):c.value.entity.type==="tag"&&(h=.8,d=.2),{ceiling:h,floor:d}}),U=(h,d)=>!(g==="modal"||l[d.id]||a[h.id]),J=(h,d)=>{h&&(Mt(["default"]).some(F=>h[F])?o("newTab",d.title||"",d.entity.uid):d.to&&q.push(d.to),Xe(()=>w.focusAddressBar.emit()))};function ae(h){var d,F,X;const V=i.parentUids[0]?((d=a[i.parentUids[0]])==null?void 0:d.uid)||"":h,H=i.parentUids[0]&&(F=n[h])!=null&&F.name?{tags:[n[h].name]}:{},z=C.add(H,V);z&&(q.push({name:"request",params:{workspace:(X=y.value)==null?void 0:X.uid,request:z.uid}}),w.hotKeys.emit({focusAddressBar:new KeyboardEvent("keydown",{key:"l"})}))}const oe=K(()=>{const{uid:h,watchModeStatus:d}=u.value||{};return h!==c.value.entity.uid?"text-c-3":d==="WATCHING"?"text-c-1":d==="ERROR"?"text-red":"text-c-3"}),Q=K(()=>c.value.title==="Drafts"&&g!=="modal"&&c.value.children.length>0),re=K(()=>{const h=R[i.uid];if(h)return!Se(h);const d=n[i.uid];return d?!Se(d):!0});return(h,d)=>{const F=Dt("RequestSidebarItem",!0);return re.value?(v(),N("li",{key:0,class:Y(["relative flex flex-row",[e(g)==="modal"&&h.parentUids.length>1||e(g)!=="modal"&&h.parentUids.length?"before:bg-border indent-border-line-offset mb-[.5px] before:pointer-events-none before:absolute before:top-0 before:left-[calc(.75rem_+_.5px)] before:z-1 before:h-[calc(100%_+_.5px)] before:w-[.5px] last:mb-0 last:before:h-full":""]])},[x(e(ta),{id:c.value.entity.uid,ref_key:"draggableRef",ref:$,ceiling:M.value.ceiling,class:"gap-1/2 flex flex-1 flex-col text-base",floor:M.value.floor,isDraggable:h.isDraggable,isDroppable:h.isDroppable,parentIds:h.parentUids,onOnDragEnd:d[12]||(d[12]=(...X)=>h.$emit("onDragEnd",...X))},{default:_(()=>{var X;return[(c.value.entity.type==="request"||c.value.entity.type==="requestExample")&&c.value.to?(v(),E(e(Ne),{key:0,class:"group no-underline",to:c.value.to,onClick:d[1]||(d[1]=Z(V=>J(V,c.value),["prevent"]))},{default:_(({isExactActive:V})=>{var H,z;return[p("div",{class:Y(["relative flex min-h-8 w-full cursor-pointer flex-row items-start justify-between gap-0.5 rounded py-1.5 pr-2",[Ee,V||W.value?"bg-sidebar-b-active text-sidebar-c-active font-medium transition-none":"text-sidebar-c-2"]])},[p("span",Wa,ce(c.value.title||"Untitled"),1),p("div",za,[p("div",La,[e(g)!=="modal"?(v(),E(e(ie),{key:0,class:Y(["hover:bg-b-3 hidden aspect-square h-fit px-0.5 py-0 opacity-0 group-hover:flex group-hover:opacity-100 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",{flex:((z=(H=h.menuItem)==null?void 0:H.item)==null?void 0:z.entity.uid)===c.value.entity.uid&&h.menuItem.open}]),size:"sm",type:"button",variant:"ghost",onClick:d[0]||(d[0]=Z(le=>h.$emit("openMenu",{item:c.value,parentUids:h.parentUids,targetRef:le.currentTarget,open:!h.menuItem.open}),["stop","prevent"]))},{default:_(()=>[x(e(B),{icon:"Ellipses",size:"md"})]),_:1},8,["class"])):O("",!0)]),p("span",Aa,[d[13]||(d[13]=pe(" â€Š ")),d[14]||(d[14]=p("span",{class:"sr-only"},"HTTP Method:",-1)),c.value.method?(v(),E(e(lt),{key:0,class:"font-bold",method:c.value.method},null,8,["method"])):O("",!0)])])],2)]}),_:1},8,["to"])):(e(g)!=="modal"||h.parentUids.length)&&c.value.entity.type==="collection"&&c.value.to?(v(),E(e(Ne),{key:1,"aria-expanded":!!e(I)[c.value.entity.uid],class:Y(["hover:bg-b-2 group relative flex w-full flex-row justify-start gap-1.5 rounded p-1.5 no-underline focus-visible:z-10",[Ee,{"bg-sidebar-b-active text-sidebar-c-active transition-none":typeof e(q).currentRoute.value.name=="string"&&e(q).currentRoute.value.name.startsWith("collection")&&e(q).currentRoute.value.params[e(te).Collection]===c.value.entity.uid,"text-c-2":c.value.title==="Untitled Collection"}]]),to:c.value.to},{default:_(()=>{var V;return[p("span",{class:"flex h-5 max-w-[14px] cursor-pointer items-center justify-center",onClick:d[2]||(d[2]=Z(H=>e(D)(c.value.entity.uid),["stop","prevent"]))},[Ue(h.$slots,"leftIcon",{},()=>[x(e(He),{class:"text-c-3 shrink-0",open:!!e(I)[c.value.entity.uid]},null,8,["open"])],!0),d[15]||(d[15]=pe(" â€Š "))]),p("div",Oa,[p("span",ja,ce(c.value.title),1),p("div",Pa,[p("div",{class:Y(["items-center gap-px opacity-0 group-hover:flex group-hover:opacity-100 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",{flex:h.menuItem.open,hidden:!h.menuItem.open||((V=h.menuItem.item)==null?void 0:V.entity.uid)!==c.value.entity.uid}])},[e(g)!=="modal"&&!m.value||m.value&&Q.value?(v(),E(e(ie),{key:0,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:d[3]||(d[3]=Z(H=>h.$emit("openMenu",{item:c.value,parentUids:h.parentUids,targetRef:H.currentTarget.parentNode,open:!0}),["stop","prevent"]))},{default:_(()=>[x(e(B),{icon:"Ellipses",size:"md"})]),_:1})):O("",!0),e(g)!=="modal"?(v(),E(e(ie),{key:1,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:d[4]||(d[4]=Z(H=>ae(c.value.entity.uid),["stop","prevent"]))},{default:_(()=>[x(e(B),{icon:"Add",size:"md",thickness:"2"})]),_:1})):O("",!0)],2),c.value.watchMode?(v(),E(e(Be),{key:0,placement:"right",offset:12,content:`Watching: ${c.value.documentUrl}`},{default:_(()=>[p("button",Va,[x(e(B),{class:Y(["ml-0.5 text-sm",oe.value]),icon:"Watch",size:"md",thickness:"2"},null,8,["class"])])]),_:1},8,["content"])):O("",!0),d[16]||(d[16]=p("span",null,"â€Š",-1))])])]}),_:3},8,["aria-expanded","class","to"])):e(g)!=="modal"||h.parentUids.length?(v(),N("button",{key:2,"aria-expanded":!!e(I)[c.value.entity.uid],class:Y(["hover:bg-b-2 group relative flex w-full flex-row justify-start gap-1.5 rounded p-1.5 focus-visible:z-10",[Ee]]),type:"button",onClick:d[7]||(d[7]=V=>e(D)(c.value.entity.uid))},[p("span",Ha,[Ue(h.$slots,"leftIcon",{},()=>[x(e(He),{class:"text-c-3 hover:text-c-1 shrink-0",open:!!e(I)[c.value.entity.uid]},null,8,["open"])],!0),d[17]||(d[17]=pe(" â€Š "))]),p("div",Ba,[p("span",Fa,ce(c.value.title),1),p("div",Ka,[p("div",{class:Y(["items-center gap-px opacity-0 group-hover:flex group-hover:opacity-100 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",{flex:h.menuItem.open,hidden:!h.menuItem.open||((X=h.menuItem.item)==null?void 0:X.entity.uid)!==c.value.entity.uid}])},[e(g)!=="modal"&&!m.value||m.value&&Q.value?(v(),E(e(ie),{key:0,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:d[5]||(d[5]=Z(V=>h.$emit("openMenu",{item:c.value,parentUids:h.parentUids,targetRef:V.currentTarget.parentNode,open:!0}),["stop","prevent"]))},{default:_(()=>[x(e(B),{icon:"Ellipses",size:"md"})]),_:1})):O("",!0),e(g)!=="modal"?(v(),E(e(ie),{key:1,class:"hover:bg-b-3 hover:text-c-1 aspect-square h-fit px-0.5 py-0 group-focus-visible:opacity-100 group-has-[:focus-visible]:opacity-100",size:"sm",variant:"ghost",onClick:d[6]||(d[6]=Z(V=>ae(c.value.entity.uid),["stop","prevent"]))},{default:_(()=>[x(e(B),{icon:"Add",size:"md",thickness:"2"})]),_:1})):O("",!0)],2),c.value.watchMode?(v(),E(e(Be),{key:0,content:"Watching: {{ item.documentUrl }}",placement:"right",offset:12},{default:_(()=>[p("button",Za,[x(e(B),{class:Y(["ml-0.5 text-sm",oe.value]),icon:"Watch",size:"md",thickness:"2"},null,8,["class"])])]),_:1})):O("",!0),d[18]||(d[18]=p("span",null,"â€Š",-1))])])],10,Na)):O("",!0),P.value?(v(),N("ul",Ja,[(v(!0),N(me,null,_e(c.value.children,V=>(v(),E(F,{key:V,isDraggable:!e(l)[V],isDroppable:U,menuItem:h.menuItem,parentUids:[...h.parentUids,h.uid],uid:V,onNewTab:d[8]||(d[8]=(H,z)=>h.$emit("newTab",H,z)),onOnDragEnd:d[9]||(d[9]=(...H)=>h.$emit("onDragEnd",...H)),onOpenMenu:d[10]||(d[10]=H=>h.$emit("openMenu",H))},null,8,["isDraggable","menuItem","parentUids","uid"]))),128)),c.value.children.length===0?(v(),E(e(ie),{key:0,class:Y(["text-c-1 hover:bg-b-2 flex h-8 w-full justify-start gap-1.5 py-0 text-xs",h.parentUids.length?"pl-9":""]),variant:"ghost",onClick:d[11]||(d[11]=V=>ae(c.value.entity.uid))},{default:_(()=>[x(e(B),{icon:"Add",size:"sm"}),d[19]||(d[19]=p("span",null,"Add Request",-1))]),_:1,__:[19]},8,["class"])):O("",!0)])):O("",!0)]}),_:3},8,["id","ceiling","floor","isDraggable","isDroppable","parentIds"])],2)):O("",!0)}}}),Ga=De(Ya,[["__scopeId","data-v-4dedda07"]]),Qa={class:"flex w-[inherit] items-center text-base"},Xa={class:"m-0 flex items-center gap-1.5 font-bold"},el={class:"line-clamp-1 text-left"},tl={class:"overflow-hidden text-ellipsis"},al={class:"flex h-4 w-4 items-center justify-center"},ll=ve({__name:"WorkspaceDropdown",setup(i){const{activeWorkspace:t}=fe(),{workspaces:o,workspaceMutators:u,events:s}=he(),{push:r}=ye(),y=I=>{var D;I!==((D=t.value)==null?void 0:D.uid)&&r({name:"workspace",params:{workspace:I}})},a=K(()=>Object.keys(o).length===1),n=()=>s.commandPalette.emit({commandName:"Create Workspace"}),R=G(""),l=G(""),L=ke(),A=ke(),C=I=>{const D=o[I];D&&(R.value=D.name,l.value=I,L.show())},k=I=>{I.trim()&&(u.edit(l.value,"name",I.trim()),L.hide())},w=I=>{const D=o[I];D&&(R.value=D.name,l.value=I,A.show())},q=async()=>{var I;if(!a.value){const D=((I=t.value)==null?void 0:I.uid)===l.value,g={...o};if(delete g[l.value],u.delete(l.value),D){const c=Object.keys(g)[0];await r({name:"workspace",params:{workspace:c}})}}A.hide()};return(I,D)=>(v(),N("div",null,[p("div",Qa,[x(e(We),null,{items:_(()=>[(v(!0),N(me,null,_e(e(o),(g,c)=>(v(),E(e(be),{key:c,class:"group/item flex w-full items-center gap-1.5 overflow-hidden text-ellipsis whitespace-nowrap",onClick:Z(m=>y(g.uid),["stop"])},{default:_(()=>{var m;return[x(e(Te),{selected:((m=e(t))==null?void 0:m.uid)===c},null,8,["selected"]),p("span",tl,ce(g.name),1),x(e(We),{placement:"right-start",teleport:""},{items:_(()=>[x(e(be),{class:"flex gap-2",onMousedown:f=>C(g.uid),onTouchend:Z(f=>C(g.uid),["prevent"])},{default:_(()=>[x(e(B),{class:"inline-flex",icon:"Edit",size:"md",thickness:"1.5"}),D[2]||(D[2]=p("span",null,"Rename",-1))]),_:2,__:[2]},1032,["onMousedown","onTouchend"]),a.value?O("",!0):(v(),E(e(be),{key:0,class:"flex gap-2",onMousedown:Z(f=>w(g.uid),["prevent"]),onTouchend:Z(f=>w(g.uid),["prevent"])},{default:_(()=>[x(e(B),{class:"inline-flex",icon:"Delete",size:"md",thickness:"1.5"}),D[3]||(D[3]=p("span",null,"Delete",-1))]),_:2,__:[3]},1032,["onMousedown","onTouchend"]))]),default:_(()=>[x(e(ie),{class:"hover:bg-b-3 -mr-1 ml-auto aspect-square h-fit px-0.5 py-0 group-hover/item:flex",size:"sm",type:"button",variant:"ghost"},{default:_(()=>[x(e(B),{icon:"Ellipses",size:"sm"})]),_:1})]),_:2},1024)]}),_:2},1032,["onClick"]))),128)),x(e(Qe)),x(e(be),{class:"flex items-center gap-1.5",onClick:n},{default:_(()=>[p("div",al,[x(e(B),{icon:"Add",size:"sm"})]),D[4]||(D[4]=p("span",null,"Create Workspace",-1))]),_:1,__:[4]})]),default:_(()=>[x(e(ie),{class:"text-c-1 hover:bg-b-2 line-clamp-1 h-full w-fit justify-start px-1.5 py-1.5 font-normal",fullWidth:"",variant:"ghost"},{default:_(()=>{var g;return[p("div",Xa,[p("h2",el,ce((g=e(t))==null?void 0:g.name),1)])]}),_:1})]),_:1})]),x(e(we),{size:"xxs",state:e(A),title:"Delete workspace"},{default:_(()=>[x(Le,{variableName:R.value,warningMessage:"This cannot be undone. You're about to delete the workspace and everything inside it.",onClose:D[0]||(D[0]=g=>e(A).hide()),onDelete:q},null,8,["variableName"])]),_:1},8,["state"]),x(e(we),{size:"xxs",state:e(L),title:"Rename Workspace"},{default:_(()=>[x(st,{name:R.value,onClose:D[1]||(D[1]=g=>e(L).hide()),onEdit:k},null,8,["name"])]),_:1},8,["state"])]))}}),sl={class:"bg-b-1 sticky top-0 z-20 flex h-12 items-center px-3"},nl={key:1,class:"text-c-3"},ol=["aria-pressed"],rl={class:"sr-only"},il={key:0,class:"search-button-fade sticky top-12 z-10 px-3 py-2.5 pt-0 focus-within:z-20",role:"search"},ul={key:1,class:"contents"},cl={key:0,class:"empty-sidebar-item-content px-2.5 py-2.5"},dl={class:"rabbit-ascii relative m-auto mt-2 h-[68px] w-[60px]"},pl=ve({__name:"RequestSidebar",emits:["newTab","clearDrafts"],setup(i,{emit:t}){const o=t,{collapsedSidebarFolders:u,isSidebarOpen:s,setCollapsedSidebarFolder:r,toggleSidebarOpen:y}=Ie(),{layout:a}=$e(),n=he(),{activeCollection:R,activeWorkspaceCollections:l,activeRequest:L,activeWorkspaceRequests:A,activeWorkspace:C}=fe(),{findRequestParents:k,events:w,requestMutators:q,requests:I}=n,{handleDragEnd:D,isDroppable:g}=Sa(C,n),{replace:c}=ye(),m=()=>{w.commandPalette.emit({commandName:"Import from OpenAPI/Swagger/Postman/cURL"})},f=Et(),{toast:j}=Ae(),P=Ut({open:!1}),W=G(!1);de(L,S=>{S&&k(S).forEach(b=>r(b,!0))},{immediate:!0});const{searchText:$,searchResultsWithPlaceholderResults:M,selectedSearchResult:U,onSearchResultClick:J,fuseSearch:ae,searchInputRef:oe,searchResultRefs:Q,navigateSearchResults:re,selectSearchResult:h}=qa(),d=G(),F=S=>{var b;S&&(S.toggleSidebar&&y(),S.focusRequestSearch&&((b=oe.value)==null||b.focus()))};Ce(()=>w.hotKeys.on(F)),Oe(()=>{w.hotKeys.off(F)});const X=S=>{if(S!=null&&S.documentUrl){S.watchMode=!S.watchMode;const b=l.value.find(T=>T.uid===S.entity.uid);b&&(b.watchMode=S.watchMode)}};de(()=>l.value.map(S=>S.watchMode),(S,b)=>{S.forEach((T,ne)=>{var ee,ge,je;if(a!=="modal"&&T!==b[ne]&&((ge=(ee=l.value[ne])==null?void 0:ee.info)==null?void 0:ge.title)!=="Drafts"&&l.value[ne]){const Pe=l.value[ne];if(!Pe)return;const nt=`${(je=Pe.info)==null?void 0:je.title}: Watch Mode ${T?"enabled":"disabled"}`;j(nt,"info")}})});const V=K(()=>{var S;const b=M.value;if(!b.length)return"No results found";const T=(S=b[U.value])==null?void 0:S.item;if(!T)return"No result selected";const ne=$.value.length?`${b.length} result${b.length===1?"":"s"} found, `:"",ee=`, HTTP Method ${T.httpVerb}, Path ${T.path}`,ge=`${T.title} ${ee}`;return`${ne}Selected: ${ge}`}),H=()=>{const S=l.value.find(b=>{var T;return((T=b.info)==null?void 0:T.title)==="Drafts"});if(S&&S.requests.forEach(b=>{I[b]&&q.delete(I[b],S.uid)}),A.value.length){const b=l.value[0],T=b?.requests[0];T&&c({name:"request",params:{[te.Request]:T}})}else{const{request:b}=et();S&&(q.add(b,S.uid),c({name:"request",params:{[te.Request]:b.uid}}))}};de(W,S=>{S||($.value="")});const z=K(()=>Ta(l.value,A.value,I)),le=K(()=>a==="modal"&&R.value?[R.value]:l.value);function se(S){!$.value&&S.relatedTarget!==d.value&&(W.value=!1)}return(S,b)=>(v(),N(me,null,[Ge(x(e(Gt),{class:Y([e(s)?"sidebar-active-width":""])},Wt({content:_(()=>[p("div",sl,[p("div",{class:Y(["size-8",{"xl:hidden":e(a)!=="modal"}])},null,2),e(a)!=="modal"?(v(),E(e(ll),{key:0})):O("",!0),e(a)!=="modal"?(v(),N("span",nl," / ")):O("",!0),e(a)!=="modal"?(v(),E(Ra,{key:2})):O("",!0),p("button",{ref_key:"searchToggleRef",ref:d,"aria-pressed":W.value,class:"ml-auto",type:"button",onClick:b[0]||(b[0]=T=>W.value=!W.value)},[p("span",rl,ce(W.value?"Hide":"Show")+" search ",1),x(e(B),{class:"text-c-3 hover:bg-b-2 max-h-8 max-w-8 rounded-lg p-1.75 text-sm",icon:"Search"})],8,ol)]),W.value?(v(),N("div",il,[x(e(da),{ref_key:"searchInputRef",ref:oe,modelValue:e($),"onUpdate:modelValue":b[1]||(b[1]=T=>tt($)?$.value=T:null),autofocus:"","aria-controls":e(f),label:V.value,onInput:e(ae),onKeydown:[b[2]||(b[2]=Re(Z(T=>e(re)("down"),["stop"]),["down"])),b[3]||(b[3]=Re(Z(T=>e(h)(),["stop"]),["enter"])),b[4]||(b[4]=Re(Z(T=>e(re)("up"),["stop"]),["up"]))],onBlur:se},null,8,["modelValue","aria-controls","label","onInput"])])):O("",!0),p("div",{class:Y(["gap-1/2 flex flex-1 flex-col overflow-visible overflow-y-auto px-3 pt-0 pb-3",[{"pb-14":e(a)!=="modal"},{"h-[calc(100%-273.5px)]":z.value}]]),onDragenter:b[7]||(b[7]=Z(()=>{},["prevent"])),onDragover:b[8]||(b[8]=Z(()=>{},["prevent"]))},[e($)?(v(),E(e(zt),{key:0,id:e(f),"aria-label":"Search Results",class:"gap-px",noResults:!e(M).length},{default:_(()=>[(v(!0),N(me,null,_e(e(M),(T,ne)=>(v(),E(e(Lt),{id:`#search-input-${T.item.id}`,key:T.refIndex,ref_for:!0,ref:ee=>e(Q)[ne]=ee,selected:e(U)===ne,class:"px-2",href:T.item.link,onClick:Z(ee=>e(J)(T),["prevent"]),onFocus:ee=>U.value=ne},{addon:_(()=>[b[10]||(b[10]=p("span",{class:"sr-only"},"HTTP Method:",-1)),x(lt,{class:"font-bold",method:T.item.httpVerb??"get"},null,8,["method"])]),default:_(()=>[pe(ce(T.item.title)+" ",1)]),_:2},1032,["id","selected","href","onClick","onFocus"]))),128))]),_:1},8,["id","noResults"])):(v(),N("nav",ul,[(v(!0),N(me,null,_e(le.value,T=>{var ne;return v(),E(Ga,{key:T.uid,isDraggable:e(a)!=="modal"&&((ne=T.info)==null?void 0:ne.title)!=="Drafts",isDroppable:e(g),menuItem:P,parentUids:[],uid:T.uid,onNewTab:b[5]||(b[5]=(ee,ge)=>o("newTab",{name:ee,uid:ge})),onOnDragEnd:e(D),onOpenMenu:b[6]||(b[6]=ee=>Object.assign(P,ee))},{leftIcon:_(()=>{var ee;return[((ee=T.info)==null?void 0:ee.title)==="Drafts"?(v(),E(e(B),{key:0,class:"text-sidebar-c-2 group-hover:hidden",icon:"Scribble",thickness:"2.25"})):(v(),E(e(at),{key:1,class:"text-sidebar-c-2 size-3.5 min-w-3.5 stroke-2 group-hover:hidden",src:T["x-scalar-icon"]||"interface-content-folder"},null,8,["src"])),p("div",{class:Y({"rotate-90":e(u)[T.uid]})},[x(e(B),{class:"text-c-3 hover:text-c-1 hidden text-sm group-hover:block",icon:"ChevronRight",size:"md"})],2)]}),_:2},1032,["isDraggable","isDroppable","menuItem","uid","onOnDragEnd"])}),128))]))],34)]),button:_(()=>[p("div",{class:Y({"empty-sidebar-item":z.value})},[z.value?(v(),N("div",cl,[p("div",dl,[x(Ze,{art:e(wa),class:"rabbitsit font-bold"},null,8,["art"]),x(Ze,{art:e(_a),class:"rabbitjump absolute top-0 left-0 font-bold"},null,8,["art"])]),b[11]||(b[11]=p("div",{class:"mt-2 mb-2 text-center text-sm text-balance"},[p("b",{class:"font-medium"},"Let's Get Started"),p("p",{class:"mt-2"}," Create request, folder, collection or import from OpenAPI/Postman ")],-1))])):O("",!0),e(a)!=="modal"?(v(),E(e(ie),{key:1,class:Y(["mb-1.5 hidden h-fit w-full p-1.5 opacity-0",{"flex opacity-100":z.value}]),onClick:m},{default:_(()=>b[12]||(b[12]=[pe(" Import Collection ")])),_:1,__:[12]},8,["class"])):O("",!0),e(a)!=="modal"?(v(),E(Yt,{key:2,click:e(w).commandPalette.emit,hotkey:"K"},{title:_(()=>b[13]||(b[13]=[pe(" Add Item ")])),_:1},8,["click"])):O("",!0)],2)]),_:2},[e(a)!=="modal"?{name:"header",fn:_(()=>[]),key:"0"}:void 0]),1032,["class"]),[[Tt,e(s)]]),e(a)!=="modal"&&P?(v(),E(Ua,{key:0,menuItem:P,onClearDrafts:H,onCloseMenu:b[9]||(b[9]=T=>P.open=!1),onToggleWatchMode:X},null,8,["menuItem"])):O("",!0)],64))}}),vl=De(pl,[["__scopeId","data-v-bca9c474"]]),ml=(i,t=!1)=>{var o,u;const s=Object.fromEntries(i);t&&["Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers"].map(a=>a.toLowerCase()).forEach(a=>delete s[a]);const r=Object.keys(s).find(a=>a.toLowerCase()==="x-scalar-modified-headers"),y=r?((u=(o=s[r])==null?void 0:o.toString().split(", "))==null?void 0:u.map(a=>a.toLowerCase()))??[]:[];return Object.keys(s).forEach(a=>{y.includes(a.toLowerCase())&&delete s[a]}),r&&delete s[r],Object.keys(s).forEach(a=>{const n=/^x-scalar-original-/i;if(n.test(a)){const R=a.replace(n,"");s[a]&&(s[R]=s[a],delete s[a])}}),Object.keys(s).forEach(a=>{const n=fl(a);a!==n&&s[a]&&(s[n]=s[a],delete s[a])}),Object.fromEntries(Object.entries(s).sort(([a],[n])=>a.localeCompare(n)))},fl=i=>i.split("-").map(t=>t.charAt(0).toUpperCase()+t.toLowerCase().slice(1)).join("-");function hl(i,t,o){var u,s,r;if(!Ht(i))return{body:void 0,contentType:void 0};if(t.body.activeBody==="formData"&&t.body.formData){const y=t.body.formData.encoding==="form-data"?"multipart/form-data":"application/x-www-form-urlencoded",a=t.body.formData.encoding==="form-data"?new FormData:new URLSearchParams;return t.body.formData.value.forEach(n=>{!n.enabled||!n.key||(n.file&&a instanceof FormData?a.append(n.key,n.file,n.file.name):n.value!==void 0&&a.append(n.key,ue(n.value,o)))}),{body:a,contentType:y}}return t.body.activeBody==="raw"?{body:ue(((u=t.body.raw)==null?void 0:u.value)??"",o),contentType:(s=t.body.raw)==null?void 0:s.encoding}:t.body.activeBody==="binary"?{body:t.body.binary,contentType:(r=t.body.binary)==null?void 0:r.type}:{body:void 0,contentType:void 0}}function bl(i,t){const o={};return i.parameters.headers.forEach(u=>{const s=u.key.trim().toLowerCase();u.enabled&&(s!=="content-type"||u.value!=="multipart/form-data")&&(o[s]=ue(u.value,t))}),o}function gl(i,t,o){const u=new URLSearchParams,s=(o?.parameters??[]).reduce((r,y)=>(y.in==="query"&&(r[y.name]=y),r),{});return i.parameters.query.forEach(r=>{if(!r.enabled)return;const y=s[r.key];switch(r.type){case"array":{const a=ue(r.value??"",t).split(/,\ ?/);if(y?.explode===!1){const n=a.join(",");u.append(r.key,n)}else a.forEach(n=>{u.append(r.key,n.trim())});break}default:{const a=ue(r.value??"",t);u.append(r.key,a.trim());break}}}),u}function yl(i,t){const o=new At(t);return Bt(o.essence)?new TextDecoder(o.parameters.get("charset")).decode(i):new Blob([i],{type:o.essence})}const Je=()=>typeof window<"u"&&"electron"in window,xl=({environment:i,example:t,globalCookies:o,proxyUrl:u,request:s,securitySchemes:r,selectedSecuritySchemeUids:y=[],server:a,status:n,pluginManager:R})=>{try{const l=i??{},L=new AbortController,A=t.parameters.path.reduce((U,J)=>(J.enabled&&(U[J.key]=ue(J.value,l)),U),{}),C=ue(a?.url??"",l),k=ue(ue(s.path,l),A);let w=C||k;if(!w)throw ze.URL_EMPTY;Object.entries(a?.variables??{}).forEach(([U,J])=>{w=ue(w,{[U]:A[U]||J.default})});const q=gl(t,l,s),I=bl(t,l),{body:D}=hl(s.method,t,l),{cookieParams:g}=Ft({example:t,env:l,globalCookies:o,serverUrl:w,proxyUrl:u}),c=y.flat().map(U=>r[U]).filter(qe),m=Kt(c,l),f={...Object.entries(m.headers).reduce((U,[J,ae])=>(U[J.toLowerCase()]=ae,U),{}),...I},j=[...g,...m.cookies],P=new URLSearchParams([...q,...m.urlParams]);Je()&&f["user-agent"]&&(f["X-Scalar-User-Agent"]=f["user-agent"]),w=Ot(w,k,P);const W=ue(Zt(j,f.Cookie),l);W&&(Je()||Fe(u,w)?(console.warn("We're using a `X-Scalar-Cookie` custom header to the request. The proxy will forward this as a `Cookie` header. We do this to avoid the browser omitting the `Cookie` header for cross-origin requests for security reasons."),f["X-Scalar-Cookie"]=W):(console.warn(`We're trying to add a Cookie header, but browsers often omit them for cross-origin requests for various security reasons. If it's not working, that's probably why. Here are the requirements for it to work:

          - The browser URL must be on the same domain as the server URL.
          - The connection must be made over HTTPS.
          `),f.Cookie=W));const $=jt(u,w),M=new Request($,{method:s.method.toUpperCase(),body:D??null,headers:f});return[null,{request:M,sendRequest:async()=>{var U,J,ae;n?.emit("start"),R&&R.executeHook("onBeforeRequest",{request:M});const oe=Date.now();try{const Q=await fetch(M,{signal:L.signal}),re=(U=Q.headers.get("content-type"))==null?void 0:U.startsWith("text/event-stream");n?.emit("stop");const h=Date.now()-oe,d=Q.clone(),F=ml(Q.headers,Fe(u,w)),X=Q.headers.get("content-type")??"text/plain;charset=UTF-8",V=await d.arrayBuffer(),H=yl(V,X),z=Q.clone(),le=z.statusText||((J=Jt[z.status])==null?void 0:J.name)||"",se=[204,205,304].includes(z.status),S=new Response(se?null:z.body,{status:z.status,statusText:le,headers:z.headers});R&&R.executeHook("onResponseReceived",{response:S,operation:s});const b="getSetCookie"in S.headers&&typeof S.headers.getSetCookie=="function"?S.headers.getSetCookie():[];return re&&Q.body?[null,{timestamp:Date.now(),request:t,response:{...S,headers:F,cookieHeaderKeys:b,reader:(ae=Q.body)==null?void 0:ae.getReader(),duration:h,method:s.method,path:k}}]:[null,{timestamp:Date.now(),request:t,response:{...Q,headers:F,cookieHeaderKeys:b,data:H,size:V.byteLength,duration:Date.now()-oe,method:s.method,status:Q.status,path:k}}]}catch(Q){return n?.emit("abort"),[Ke(Q,ze.REQUEST_FAILED),null]}},controller:L}]}catch(l){return console.error(l),n?.emit("abort"),[Ke(l),null]}},kl={class:"flex h-full"},wl={class:"flex h-full flex-1 flex-col"},_l=ve({__name:"RequestRoot",emits:["newTab"],setup(i){const t=he(),{toast:o}=Ae(),{layout:u}=$e(),s=Pt(),{isSidebarOpen:r}=Ie(),{activeCollection:y,activeExample:a,activeEnvironment:n,activeRequest:R,activeWorkspace:l,activeServer:L}=fe(),{cookies:A,requestHistory:C,showSidebar:k,securitySchemes:w,events:q}=t,I=Vt(),D=G(),g=G(),c=G(new Set),m=G(null),f=K(()=>{var $,M,U;return(($=y.value)!=null&&$.useCollectionSecurity?(M=y.value)==null?void 0:M.selectedSecuritySchemeUids:(U=R.value)==null?void 0:U.selectedSecuritySchemeUids)??[]}),j=async()=>{var $,M,U,J,ae,oe;if(!R.value||!a.value||!y.value)return;c.value=ga(a.value);const Q=typeof n.value=="object"?n.value.value:"{}",re=pa.parse(Q);re.error&&console.error("INVALID ENVIRONMENT!");const h=re.error||typeof re.data!="object"?{}:re.data??{},d=(($=l.value)==null?void 0:$.cookies.map(le=>A[le]).filter(qe))??[],F=((U=(M=y.value)==null?void 0:M.info)==null?void 0:U.title)==="Drafts"?void 0:L.value,[X,V]=xl({request:R.value,example:a.value,selectedSecuritySchemeUids:f.value,proxyUrl:((J=l.value)==null?void 0:J.proxyUrl)??"",environment:h,globalCookies:d,status:q.requestStatus,securitySchemes:w,server:F,pluginManager:I});if((oe=(ae=s.value)==null?void 0:ae.onRequestSent)==null||oe.call(ae,R.value.path??""),X){o(X.message,"error");return}g.value=V.controller;const[H,z]=await V.sendRequest();m.value=z,H?o(H.message,"error"):C.push(W(z))},P=async()=>{var $;return($=g.value)==null?void 0:$.abort(ze.REQUEST_ABORTED)};Ce(()=>{q.executeRequest.on(j),q.cancelRequest.on(P)}),ka(),Oe(()=>q.executeRequest.off(j)),de(()=>{var $;return($=a.value)==null?void 0:$.parameters},()=>{c.value.clear()},{deep:!0});const W=$=>{var M;try{return structuredClone($)}catch{const U={...$};return(M=$.response)!=null&&M.data&&($.response.data instanceof Blob||$.response.data instanceof ArrayBuffer?U.response.data=$.response.data:U.response.data=JSON.parse(JSON.stringify($.response.data))),U}};return($,M)=>(v(),N("div",{ref_key:"element",ref:D,class:Y(["bg-b-1 relative z-0 flex h-full flex-1 flex-col overflow-hidden pt-0",{"!mr-0 !mb-0 !border-0":e(u)==="modal"}])},[e(k)?(v(),E(ba,{key:0,modelValue:e(r),"onUpdate:modelValue":M[0]||(M[0]=U=>tt(r)?r.value=U:null),class:Y(["absolute top-2 left-3 z-50",[{hidden:e(r)},{"xl:!flex":!e(r)},{"!flex":e(u)==="modal"}]])},null,8,["modelValue","class"])):O("",!0),p("div",kl,[e(k)?(v(),E(vl,{key:0,onNewTab:M[1]||(M[1]=U=>$.$emit("newTab",U))})):O("",!0),p("div",wl,[x(e(Nt),{invalidParams:c.value,selectedSecuritySchemeUids:f.value,requestResult:m.value},null,8,["invalidParams","selectedSecuritySchemeUids","requestResult"])])])],2))}}),Wl=De(_l,[["__scopeId","data-v-8a88f90a"]]);export{Wl as default};
